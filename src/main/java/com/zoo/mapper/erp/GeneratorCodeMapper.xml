<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zoo.mapper.erp.GeneratorCodeMapper">
	<select id="getGeneratorCodeByCondition" resultType="com.zoo.model.erp.GeneratorCode" parameterType="map">
		SELECT 
			id,
			type,
			pid,
			number,
			initCode,
			companyId
		FROM 
			generator_code 
		WHERE 1=1 
			<if test="companyId!=null">
				AND companyId=#{companyId} 
			</if>
			<if test="initCode!=null">
				AND initCode=#{initCode} 
			</if>
			<if test="type!=null">
				AND type=#{type} 
			</if>
			<if test="pid!=null">
				AND pid=#{pid} 
			</if>
	</select>
	<insert id="insertGeneratorCode" parameterType="com.zoo.model.erp.GeneratorCode">
		INSERT INTO 
			generator_code
			(
				id,
				type,
				pid,
				number,
				initCode,
				companyId
			)
			VALUES
			(
				#{id},
				#{type},
				#{pid},
				#{number},
				#{initCode},
				#{companyId}
			)
	</insert>
	<update id="updateNumber" parameterType="map">
		UPDATE 
			generator_code 
		SET 
			number = #{number} 
		WHERE 
			id=#{id}
	</update>
</mapper>